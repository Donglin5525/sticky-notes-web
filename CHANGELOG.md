# 更新日志

所有重要的项目变更都会记录在这个文件中。

格式遵循 [Keep a Changelog](https://keepachangelog.com/) 标准，版本号遵循 [Semantic Versioning](https://semver.org/)。

---

## [v1.6.0] - 2026-03-02

### 新增
- ✨ **习惯打卡更新日志入口** — 桌面端顶部文字按钮 + 移动端图标按钮，首次访问新版本自动弹出更新日志
- ✨ **标签树新增子标签** — 右键点击任意标签可新增子标签，支持在任意层级下创建
- ✨ **全局习惯排序** — 统计页面支持按最近打卡、打卡次数、最新创建三种方式排序所有习惯
- ✨ **计次型习惯乐观更新** — 点击 +1 按钮后立即显示反馈，后台异步记录，解决网络慢时的延迟感

### 修复
- 🐛 **更新日志弹窗重复弹出** — 修复切换 Tab 时页面重新挂载导致弹窗反复出现的问题，现在只在真正升级新版本时弹出一次
- 🐛 **移动端趋势图 tooltip 超出框** — 调整 tooltip 定位，确保在小屏幕上不超出容器边界

### 改进
- 📊 **趋势图数据优化** — 当数据稀疏时（<30% 天数有数据），只显示有数据的日期范围，避免大量空白压缩柱子
- 📊 **柱状图高度计算** — 改用像素单位替代百分比，确保在 flex 布局下柱子高度正确渲染
- 🔧 **更新日志架构重构** — 版本号自动从 `changelog.json` 第一条记录读取，无需手动维护；合并两套弹窗为全局唯一实例，弹窗状态提升到 App.tsx
- 🏷️ **更新日志模块标签** — 每条变更记录新增彩色模块标签（便签笔记/待办清单/习惯打卡/通用），清晰区分每次更新涉及的功能模块

---

## [v1.5.0] - 2026-02-27

### 新增
- ✨ **标签树新增子标签功能** — 右键点击标签可新增子标签，支持在任意组织结构层级下创建
- ✨ **全局习惯排序功能** — 统计页面支持按最近打卡、打卡次数、最新创建排序所有习惯
- ✨ **计次型习惯乐观更新** — 点击 +1 按钮后立即显示反馈，后台异步记录，解决网络慢时的延迟问题

### 修复
- 🐛 **移动端趋势图坐标轴超出框** — 调整 tooltip 位置为 `-top-6 + mb-1`，确保在小屏幕上正确显示
- 🐛 **柱状图高度计算错误** — 改用像素单位替代百分比，优化数据稀疏时的显示效果

### 改进
- 📱 **移动端底部 Tab 顺序调整** — 重新排序为：打卡 → 代办 → 便签，符合使用频率
- 📱 **移动端首屏优化** — 首次打开应用默认显示打卡页面（/habits）
- 📊 **趋势图数据优化** — 当数据稀疏时（<30% 天数有数据），只显示有数据的日期范围

---

## [v1.4.0] - 2026-02-26

### 新增
- ✨ **习惯打卡统计面板** — 支持周/月/季度/年多维度统计分析
- ✨ **趋势图可视化** — 计次型显示柱状图，数值型显示折线图

### 修复
- 🐛 **趋势图显示问题** — 修复柱状图在大数据差异下的显示问题

---

## [v1.3.0] - 2026-02-25

### 新增
- ✨ **习惯打卡热力图** — GitHub 风格热力图展示习惯连续性

### 改进
- 📱 **移动端响应式优化** — 完整适配手机屏幕，支持 safe-area 安全区域

---

## [v1.2.0] - 2026-02-20

### 新增
- ✨ **四象限任务管理** — 基于艾森豪威尔矩阵的任务分类
- ✨ **任务拖拽排序** — 支持在象限内拖拽调整任务优先级

### 改进
- 🎨 **UI 设计优化** — 更新配色方案，提升视觉层次

---

## [v1.1.0] - 2026-02-15

### 新增
- ✨ **便签图片上传** — 支持上传图片到 S3，自动生成 CDN 链接
- ✨ **标签管理** — 支持新增、重命名、删除、移动标签

### 改进
- 🔍 **搜索功能** — 支持按标签和内容搜索便签
- 💾 **数据备份** — 支持导出和导入便签数据

---

## [v1.0.0] - 2026-02-01

### 新增
- ✨ **便签笔记** — 支持富文本编辑、标签分类、颜色主题
- ✨ **习惯打卡** — 支持计次型和数值型两种记录方式
- ✨ **用户认证** — 集成 Manus OAuth 认证
- ✨ **数据持久化** — 使用 MySQL/TiDB 数据库存储

### 特性
- 📱 响应式设计，支持 PC 和移动端
- 🎨 深色/浅色主题切换
- 🔐 用户数据隐私保护
- ⚡ 快速加载和流畅交互

---

## 图例说明

| 符号 | 含义 |
|------|------|
| ✨ | 新功能 |
| 🐛 | bug 修复 |
| 📱 | 移动端优化 |
| 🎨 | UI/UX 改进 |
| 🔍 | 搜索/查询优化 |
| 💾 | 数据/存储相关 |
| ⚡ | 性能优化 |
| 📊 | 数据可视化 |
| 🔐 | 安全/隐私相关 |

---

## 如何贡献

提交新的需求或改进点时，请：

1. 在 `todo.md` 中添加任务
2. 同时适配 PC 端和移动端
3. 完成后更新本文件
4. 运行 `pnpm test` 确保测试通过
5. 提交 `webdev_save_checkpoint`

感谢你的贡献！🙏
