# Project TODO - 便签应用重构

## 全栈升级
- [x] 启用数据库和用户管理功能 (web-db-user)
- [x] 运行数据库迁移
- [x] 创建便签数据表 (notes table)
- [x] 实现便签 CRUD API (tRPC procedures)
- [x] 实现用户与便签关联

## UI/UX 重新设计
- [x] 设计新的布局结构 (Dashboard 风格)
- [x] 重新设计便签卡片组件 (增加内容展示区域)
- [x] 优化侧边栏导航
- [x] 实现响应式设计
- [x] 添加空状态和加载状态

## 四象限管理功能
- [x] 添加优先级字段 (重要/紧急)
- [x] 创建四象限视图组件
- [ ] 实现拖拽排序功能
- [x] 添加优先级筛选

## PWA 配置
- [x] 配置 Web App Manifest
- [x] 生成应用图标
- [x] 添加 PWA meta 标签
- [ ] 实现 Service Worker (离线支持)
- [ ] 配置安装提示

## 测试与优化
- [x] 编写单元测试
- [ ] 性能优化
- [ ] 最终测试与交付

## UI 修复（用户反馈）
- [x] 修复列表卡片左上角溢出问题
- [x] 修复编辑器底色问题（改为白色底色）
- [x] 优化整体颜色交互设计

## UI 修复（用户反馈 2）
- [x] 修复重要/紧急按钮点击后卡片不实时刷新的问题
- [x] 点击编辑器外部区域时关闭编辑器
- [x] 将列表视图改为条状（横向）展示样式

## 编辑器重构
- [x] 集成 Markdown 编辑器组件
- [x] 支持 Markdown 语法实时预览
- [x] 实现图片粘贴功能
- [x] 图片上传到云端存储（S3）
- [x] 在编辑器中显示已上传的图片

## UI 修复（用户反馈 3）
- [x] Markdown 编辑器默认只显示预览，点击编辑时显示编辑器
- [x] 修复有序列表空行换行时的退出逻辑（MDEditor 组件自带处理）
- [x] 修复颜色筛选组件溢出屏幕问题
- [x] 实现标签层级支持（A/B/C 形式，树状展示）
- [x] 生成新的应用图标供用户选择

## UI 修复（用户反馈 4）
- [x] 修复右侧颜色选择布局溢出问题
- [x] 便签选中交互优化（点击便签/空白处/ESC 取消选中）
- [x] 标签管理功能（编辑、重命名、移动到其他标签下）
- [x] 四象限 TODO 勾选功能（待办事项勾选效果）

## UI 修复（用户反馈 5）
- [x] 修复颜色筛选按钮不够圆的问题（使用 box-shadow 替代 ring）

## Markdown 编辑器重构（WYSIWYG）
- [x] 安装 TipTap 编辑器依赖
- [x] 创建 WYSIWYG 编辑器基础组件
- [x] 实现列表实时渲染（`- ` 转换为圆点）
- [x] 实现智能退格删除（空列表项按 Backspace 清除整行）
- [x] 实现图片内联显示（上传图片直接显示而非 URL）
- [x] 集成到 NoteEditor 组件
- [x] 测试所有功能正常

## 时间显示优化
- [x] 检查数据库时间字段存储格式（使用 Unix 毫秒时间戳）
- [x] 修改前端时间显示为北京时间（UTC+8）
- [x] 测试时间显示正确

## 标签功能增强
- [x] 实现标签选择器弹窗（点击标签图标显示已创建标签列表）
- [x] 实现编辑器内 # 标签提示功能
- [x] 实现标签点击跳转到筛选列表
- [x] 测试所有功能正常


## 标签树优化
- [x] 标签树默认展开所有层级
